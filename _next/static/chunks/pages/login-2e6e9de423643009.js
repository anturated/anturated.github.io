(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[295],{2016:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(7876),n=s(6446),o=s(4232),r=s(7013);function l(){let e=(0,o.useContext)(r.api_url),t="rounded bg-surface-container p-2",s="bg-primary text-surface p-1 min-w-30 rounded-2xl flex items-center justify-center",l=async t=>{t.preventDefault();let s=t.nativeEvent.submitter,a=new FormData(t.currentTarget),n=a.get("email"),o=a.get("password"),r=s.value;if(console.log(r),"login"==r)try{let t=await fetch("".concat(e,"/api/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:o})});if(t.ok){let e=await t.json();localStorage.setItem("token",e.token)}let s=localStorage.getItem("token");fetch("".concat(e,"/api/user"),{method:"GET",headers:{Authorization:s?"Bearer ".concat(s):""}}).then(e=>e.json()).then(e=>{console.log("NAME: ".concat(e.name))})}catch(e){console.error(e)}else try{(await fetch("".concat(e,"/api/register"),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,name:n,password:o})})).ok&&console.log("registered successfully")}catch(e){console.error(e)}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col",children:[(0,a.jsx)(n.A,{}),(0,a.jsxs)("div",{className:"flex flex-col flex-1 items-center justify-center gap-6",children:[(0,a.jsx)("span",{className:"font-bold text-2xl",children:"Login / Register"}),(0,a.jsxs)("form",{className:"flex flex-col gap-3",onSubmit:l,children:[(0,a.jsx)("input",{className:t,type:"text",name:"email",id:"email",placeholder:"Login"}),(0,a.jsx)("input",{className:t,type:"password",name:"password",id:"password",placeholder:"Password"}),(0,a.jsxs)("div",{className:"flex justify-around",children:[(0,a.jsx)("button",{className:s,type:"submit",name:"action",value:"login",children:(0,a.jsx)("span",{children:"Login"})}),(0,a.jsx)("button",{className:s,type:"submit",name:"action",value:"register",children:(0,a.jsx)("span",{children:"Register"})})]})]}),(0,a.jsx)("span",{className:"text-error text-center m-6 absolute ",children:"error text"})]})]})}},7984:(e,t,s)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return s(2016)}])}},e=>{e.O(0,[909,922,351,13,636,593,792],()=>e(e.s=7984)),_N_E=e.O()}]);