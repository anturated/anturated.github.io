(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[787],{6446:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var n=a(7876),s=a(8230),l=a.n(s);let r=function(){return(0,n.jsx)("div",{className:"min-w-screen flex justify-center",children:(0,n.jsxs)("div",{className:"header h-10 p-3 w-full max-w-6xl flex items-center justify-between outline-1 outline-amber-50",children:[(0,n.jsx)("h1",{className:"text-xl font-bold italic",children:"Booba"}),(0,n.jsxs)("nav",{className:"space-x-3",children:[(0,n.jsx)(l(),{href:"/",className:"hover:text-gray-300",children:"Home"}),(0,n.jsx)(l(),{href:"/todo",className:"hover:text-gray-300",children:"Notes"}),(0,n.jsx)(l(),{href:"/events",className:"hover:text-gray-300",children:"Events"}),(0,n.jsx)(l(),{href:"/warframe",className:"hover:text-gray-300",children:"Warframe"})]})]})})}},6736:(e,t,a)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/events",function(){return a(9548)}])},9548:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>c});var n=a(7876),s=a(4232);a(2099);var l=a(6446);let r="http://localhost:5000/api/events";function c(){let[e,t]=(0,s.useState)([]),[a,c]=(0,s.useState)(""),[d,h]=(0,s.useState)(""),[m,x]=(0,s.useState)("DEBUG");(0,s.useEffect)(()=>{fetch("".concat(r,"/get")).then(e=>e.text()).then(e=>JSON.parse(e)).then(e=>t(e)).catch(e=>console.error(e))},[]);let u="bg-surface-container p-1 rounded-xl";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.A,{}),(0,n.jsxs)("form",{className:"flex flex-col m-3 max-w-100 gap-3",children:[(0,n.jsx)("input",{className:u,placeholder:"email",onChange:e=>h(e.target.value)}),(0,n.jsx)("input",{className:u,placeholder:"name",onChange:e=>c(e.target.value)})]}),(0,n.jsx)("h3",{children:m}),(0,n.jsx)(o,{onClick:()=>{for(let e=0;e<200;e++){let t=fetch("".concat(r,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:"019978c4-310e-7737-bd5e-7f4d84ae5e23",email:"email".concat(e),name:"bobik"})});console.log("register number ".concat(e," ")+t.ok?"success":0)}},children:"spam"}),(0,n.jsx)(o,{onClick:()=>{fetch("".concat(r,"/init"))},children:"init"}),(0,n.jsx)(o,{onClick:()=>{fetch("".concat(r,"/nuke"))},children:"Nuke"}),(0,n.jsx)("ol",{children:null==e?void 0:e.map((e,s)=>(0,n.jsx)(i,{ev:e,setEvents:t,name:a,email:d,setDebugText:x},s))})]})}function i(e){let{ev:t,setEvents:a,email:s,name:l,setDebugText:c}=e,i=async()=>{console.log("registering for event ".concat(t.name," ").concat(t.id));let e=await fetch("".concat(r,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({eventId:t.id,email:s,name:l})});if(e.ok){let t=JSON.parse(await e.text());a(e=>e.map(e=>e.id===t.id?t:e)),c("registered for event")}else{var n;c((n="error: "+await e.text(),n))}},d=async()=>{(await fetch("".concat(r,"/mail?EventId=").concat(t.id,"&addr=desantua20@gmail.com"))).ok?c("email sent"):c("email fali")},h=new Date(t.timeStart).toLocaleString(),m=new Date(t.timeEnd).toLocaleString(),x=t.slotsTaken>=t.slots?d:i,u=t.slotsTaken>=t.slots?"send email":"register";return(0,n.jsxs)("li",{children:[(0,n.jsx)("p",{children:t.name}),(0,n.jsxs)("p",{children:["Start: ",h]}),(0,n.jsxs)("p",{children:["End: ",m]}),(0,n.jsxs)("p",{className:"slots",children:[t.slotsTaken,"/",t.slots]}),(0,n.jsx)(o,{onClick:x,children:u})]})}function o(e){let{onClick:t,children:a}=e;return(0,n.jsx)("button",{className:"bg-primary text-on-primary rounded-xl p-2 m-1",onClick:t,children:a})}}},e=>{e.O(0,[230,636,593,792],()=>e(e.s=6736)),_N_E=e.O()}]);